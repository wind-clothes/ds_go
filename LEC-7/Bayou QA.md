## Bayou QA

Bayou常见问题

问：很多Bayou的设计是由支持的愿望驱动的
断开连接操作 今天还是很重要吗？

A：断开连接和连接不良的操作继续存在
重要的，虽然在不同的设想。Dropbox，Amazon的Dynamo，
Cassandra，git和智能手机同步都是真实世界的系统
高度的目标和属性类似于Bayou的：他们允许
立即读取和写入本地副本即使断开连接，
他们提供最终的一致性，他们必须应付写作
冲突。

问：广泛使用的无线互联网是否意味着每个人都是
连接了吗？
 
A：无线连接似乎没有减少需要
断开连接操作 也许原因是什么不足
100％的连接意味着软件必须设计为处理
断开期间。例如，我的笔记本电脑没有WiFi，但是没有
细胞数据; 有时我想要使用我的笔记本电脑
但我不想支付WiFi，或者没有附近
切入点。对于git，我经常不想看别人的变化
即使我的笔记本电脑连接也是如此。我想要能够使用我的
智能手机的联系人列表和日历，无论是否启用
互联网。

问：Bayou支持将一台设备直接同步到另一台设备，
例如通过蓝牙或红外线，不经过互联网或
一个服务器 这很重要吗

A：也许不是 我认为通过中间服务器同步设备
互联网大概就够了。

问：今天有人使用巴渝吗？如果没有，我们为什么要读这篇文章？

A：今天没有人使用巴约 这是一个研究原型
探索新的建筑。Bayou使用多种想法值得
知道：最终的一致性，冲突解决，记录操作
而不是数据，使用时间戳来协助订单，
版本向量，以及通过Lamport逻辑时钟的因果一致性。
 
问：是否有应用程序定义冲突程序的想法
分辨率在其他分布式系统中使用？或者有这个概念
消失了，因为大多数设备可以不断连接？
 
答：冲突解决在许多涉及的应用程序中使用
同步。例如，git将尝试合并不同的
用户对同一文件中不同行的更改（尽管没有）
总是做得很好）。
 
问：像Dropbox这样的公司是否使用类似于Bayou的协议？
 
A：我怀疑Dropbox使用像Bayou这样的东西。我怀疑Dropbox移动
文件内容，而不是具有写入日志。在另一
手Dropbox在应用程序特定解决方案上并不灵活
相同文件的冲突更新。
 
问：数据是否弱一致是什么意思？
 
答：这意味着客户可能会看到不同的副本不是
相同的，尽管系统试图让它们保持一致
能够。

问：如果你想支持，最好的一致性是你能做的最好的
断开操作？

答：是的，最终的一致性（或轻微的改善，如因果关系）
一致性）是你能做的最好的。如果我们想支持读取和
写入数据的断开的副本（如Bayou所做），我们有
容忍用户看到陈旧的数据，用户造成冲突
写入仅在同步之后才是明显的。这很好
甚至可以在这样的系统中获得最终的一致性！
 
问：似乎写一个依赖关系检查和合并程序
各种操作可能对程序员来说是一个艰难的界面
处理。有什么我在那里失踪吗？
 
答：程序员的工作是必须的。但是回到巴约
为难以解决的问题提供了一个非常光滑的解决方案
对相同数据的冲突更新。

问：主要副本是系统的单点故障吗？

某种。如果主要是失败或无法访问，一切正常
罚款，除了写入不会被声明稳定。例如，
日历应用程序基本上可以工作，尽管用户必须
生活在担心具有低时间戳的新日历条目可能
出现并更改显示的日程表。
 
问：依赖关系检查如何检测写 - 写冲突？论文
说“这样的冲突可以通过进行依赖检查来检测
查询正在更新并确保的任何数据项的当前值
他们没有改变他们当时所拥有的价值观
写的是提交的“，但我不太明白在这种情况下什么
依赖关系检查的预期结果是。
 
答：假设应用程序要修改日历条目“10:00”，但是
只有没有条目。当应用程序运行时，有
禁止入内。所以应用程序会产生这个Bayou写操作：

  dependency_check = {检查“10:00”的值为nil}
  update = {将“10:00”的值设置为“staff meeting”}
  mergeproc = {...}

如果没有其他写入修改为10:00，则dependency_check将成功
在所有服务器上，它们都将设置为“员工会议”。

如果一些其他的写，由不同的客户端大约在同一时间设置
10:00“进入会议”，那就是写/写冲突：
两个不同的写入需要将相同的数据库条目设置为不同的值。
依赖关系检查将在同步时检测冲突
导致一些服务器看到这两个写入。一写将在第一
日志（因为它具有较低的时间戳）; 它的依赖检查会
成功，它将更新10:00条目。这是第二个写的
日志会导致依赖关系检查失败，因为DB值为10:00
不再是零。

也就是说，检查数据库条目具有与之相同的值
应用程序原来运行的确检测到其中的情况
冲突的写入在日志中首先排序。
 
问：什么时候调用依赖检查？
 
答：每个服务器执行它听到的新的日志条目
同步。对于每个新的日志条目，服务器调用该条目
依赖检查 如果检查成功，则服务器应用该条目
更新到其DB。
 
问：如果两个客户端在分区服务器上进行冲突的日历预留，
当这两台服务器通信时，执行依赖关系检查？
 
答：如果两台服务器同步，那么他们的日志将包含每个
其他人的保留，在这一点上，两者都将执行检查。
 
问：看起来像依赖检查的逻辑会发生在何时
你是第一次插入一个写操作，但你不会找到任何
与分区服务器冲突。
 
A：每当一个服务器同步时，它会将数据库回滚到最早的位置
哪个同步修改其日志，然后重新执行所有日志条目
之后（包括依赖检查）。
 
问：是否有任何其他常用的系统使用这种类型的
应用敏感冲突检测和解决？
 
答：有同步系统有特定的应用冲突
解析度。例如，当有人将自己的iPhone与他们的Mac同步时，
日历以理解结构的方式合并
日历。类似地，Dropbox有一个允许应用程序进行干预的API
当Dropbox检测到相同文件的冲突更新时。但是，我不是
意识到Bayou以外的任何系统同步写入日志（其他系统）
通常同步实际的文件内容）。
 
问：什么是反熵会话？
 
A：这是指一对设备之间的同步，在此期间
设备交换日志条目以确保它们具有相同的日志（和
因此相同的DB内容）。
 
问：什么是流行病学算法？
 
A：成对设备与其交换数据的通信方案
彼此，包括他们从其他设备听到的数据。该
“流行病”是指最终新数据传播的事实
通过这些成对交换到所有设备。
 
问：为什么写交换会话称为反熵会话？
 
A：也许是因为它们减少了混乱。“熵”的一个定义是a
测量系统中的紊乱。
 
问：为了知道写是否稳定，服务器是否必须
联系所有其他服务器？
 
A：Bayou有一个特殊的主要通过分配提交（稳定）写入
他们是CSN。您只需要联系主要知道所做的是什么。
 
问：写入到达所有服务器需要多少时间？
 
答：最糟糕的是，服务器可能永远不会看到更新，因为它是坏的。
最好的是，服务器可以频繁地与其他服务器同步
因此可能会快速看到更新。纸张没有太多的具体含义
说这个，因为这取决于用户是否关闭他们
笔记本电脑，无论他们花费大量的时间没有网络
连接，＆c。
 
问：在什么情况下自动解析是不可能的？它只是依赖
在应用程序上，或者是否适用于任何应用程序
可能会自动解析失败？
 
答：通常取决于应用程序。在日历示例中，如果
我只提供两个可能的时间段，例如10:00和11:00，以及那些
槽已经被采取，湾不能解决冲突。但假设
数据是“星期五可以参加午餐的人数”，而且
更新是可以参加的人数的增量。
这些更新总是可以成功的 - 总是可以添加1到
计数。

问：什么是好的（快速收敛）和不那么好的反熵的例子
政策？
 
答：一个很好的情况是，如果所有服务器频繁同步
与一个单一的服务器（或更一般如果之间有一条路径
每两个服务器由频繁同步的对组成）。坏了
情况是如果一些服务器不频繁同步，或者如果有的话
是两组服务器，每组内频繁同步，
但是组之间罕见的同步。
 
问：我不明白为什么“暂时删除可能会导致出现一个元组
在承诺的观点，但不是在全面的观点。“（第8页的开头）
 
A：提交的视图只反映已经提交的写入。
所以如果有一个暂时的操作删除记录X，记录X
将在承诺的观点，但不是在全面的看法。全视图
反映所有操作（包括删除），但承诺视图
仅反映承诺操作（因此不是删除）。
 
问：巴约介绍了很多新的想法，但不清楚哪些想法
对于表演最重要。
 
答：我怀疑巴约比较慢。他们的目标不是表现，而是
相当新的功能：一种可以支持共享可变的新型系统
数据尽管间歇性的网络连接。
 
问：撤消日志包含什么样的信息？（例如这样做
包含从写入或相反的更改的文件的快照
操作？）还是这个更多的实现细节？
 
答：我怀疑撤销日志包含每个写入的条目和值
的DB记录，写入修改*前*修改。这允许
Bayou以反向日志顺序回滚DB，替换每个修改的DB
与以前版本的记录。
 
问：特定的服务器是如何指定的？
 
A：我认为人类选择。
 
问：如果沟通在反熵会话中失败了怎么办？
 
答：Bayou总是在同步时按顺序发送日志条目，所以没关系
为了使接收者将其收到的条目添加到其日志中，即使如此
没有收到发件人的后续条目。
 
问：本文不谈缓存。我们是否应用相同的规则
内存模式缓存呢？
 
A：每个Bayou服务器（即像笔记本电脑或iPhone的设备）都有完整的副本
的所有数据。所以不需要显式缓存。

问：论文提到的会议保证是什么？

A：Bayou允许应用程序切换服务器，以便客户端
设备可以通过网络与Bayou服务器通话，而不是拥有
运行完整的Bayou服务器。但如果应用程序切换服务器
当它正在运行时，新的服务器可能没有看到所有的写入
应用程序发送到以前的服务器。会话保证
是一种处理这个问题的技术。应用程序保持会话
版本向量汇总其发送到任何服务器的所有写入。
当它连接到一个新的服务器时，应用程序首先检查
新服务器至少与会话版本一样最新
向量。如果没有，应用程序会找到一个最新的新服务器。