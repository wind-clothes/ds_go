## PNUTS QA

问：谁使用PNUTS？

据我所知，雅虎是唯一一家使用PNUTS的公司。其他
公司也遇到类似的问题，但只有一些人形容
他们的解决方案详细。我们将看亚马逊的Dynamo
针对购物车的不同设计，以及在某些工作中
Facebook的。Google的扳手是另一种类似的方法
问题。

问：主人失败会怎么样？

答：如果记录的主区域失去连接或区域
然后*否*新主人被指定。存储单位有
对于主人而言的写作必须等到该地区为止
再次可用 如果主服务器上的YMB服务器发生故障，那么有一个
备份与备份的日志准备好接管。

问：什么是YMB？

A：我不知道YMB的一个很好的描述（Yahoo Message
经纪人），但API符合以下精神：

  发布（消息）
  订阅（处理）
  处理程序（消息）

YMB客户端发布消息。其他YMB客户订阅
提供在发布消息时必须调用的处理程序。如果
订阅了几个进程，然后他们都接收到消息
同样的顺序。

YMB在磁盘上保留消息，复制它们，并确保
消息以与本地YMB群集相同的顺序传递
收到他们一个给定的主题。YMB是可靠的 - 它一直在努力
发送每封邮件，直到收件人确认。

也许雅虎的新Pulsar类似于YMB：

https://yahooeng.tumblr.com/post/150078336821/open-sourcing-pulsar-pub-sub-messaging-at-scale

问：PNUTS如何使用YMB？

答：记录主人将发布其本地YMB群集的更新。
YMB将在每个其他区域和每个消息中传递每条消息
他们将把每个消息转发给本地的PNUTS路由器，这将会
发送给相应的SU。因为只有一个作家
在PNUTS（即记录主）中，记录的更新将全部
完全订购 因为YMB没有丢失消息（它存储它们
在磁盘上，复制），消息总是保证
最终交付。

问：什么是订购和散列表？

A：有序的表保持键排序，使得范围查询是有效的
（例如，返回key1和key2之间的所有记录）。有序表是
经常用树木实施。哈希表不保留键命令，但是
而是使用散列函数将每个键分配给阵列中的一个插槽
关键; 当应用程序只需要一个记录时，它们是快速的
与特定密钥相关联。实际上大多数应用都可以
对这两种表感到高兴。

问：对于示例1，是否必须使用Read-critical（）而不是
Read-any（）以确保您获得最新版本的照片
权限？Read-any（）可能会返回过时的数据，所以看起来像你
当妈妈想要查看照片时，可以获得旧的权限。

A：假设照片列表和ACL是相同的
记录。read-any（）应该正常工作，因为写入同一条记录
被订购 因此，如果Alice首先更新ACL，然后更新照片
列表中，观察新照片列表的读者也将观察到
新的ACL。

问：第1.2节中提到的贡献是否真的有根本的
新的激进？

答：每份研究论文必须要求贡献来说服
提交论文的会议的审评员
纸是原创的。我认为阅读这篇论文的正确方法是
在构建可以从中读取的系统的经验文件
本地数据中心，使用户观察到低延迟。意即
设计师不得不放弃一些一致性，因为检查
最近写入的其他数据中心将太贵了。
然而，他们不想让程序员的生活因为而变得复杂
缺乏一致性。该报告报告了他们如何解决这些问题
目标与大多数知名技术，但结合在一起
导致了一种新颖的系统设计。设计工作的观察
对于一些实质性的现实世界的应用来说本身就是一个有价值
贡献。

问：什么是托管系统？

A：PNUTS作为许多雅虎的共享基础架构
应用。而不是让每个雅虎应用程序处理
几个数据中心的问题，雅虎 提供一个共享
许多应用程序可以使用的基础设施
应用开发更简单。这提出了挑战
服务共享基础设施应该提供和如何做到这一点
适用于许多应用。另外，雅虎 团队可以添加
更多的机器动态地共享基础设施来处理
负载，这可能有益于几个应用程序。

问：什么是参照完整性？

A：假设有一张表，每个麻省理工学院的学生有一个记录，由...键入
学生的麻省理工学院编号，另有另一张表格为6.824等级
每个学生在6.824，与学生的麻省理工学院的ID。如果有记录
在6.824等级表中，MIT ID为12345，但没有条目
MIT ID 12345在学生表中，这违反了引用
完整性。也就是说，一张表中的记录是指记录
应该存在于第二个表中，但不存在。许多SQL数据库
强制引用完整性，但PNUTS不。

问：部分和总订购是什么意思？

答：由“部分”，本文意味着写入不同的记录
没有排序关系 - 对不同记录的两次写入可能是
在不同地区以任何顺序执行。以“总”为题
意味着对同一记录的两次写入将由所有区域执行
以相同的顺序。

问：什么是次要索引和物化视图，如下所述
第6.1节

A：辅助索引是某列上的表的索引。经常你
想要快速访问表的记录
不同列的数量，例如我可能想要检索人员
麻省理工学院的记录由员工姓名，或麻省理工学院的ID或部门。对于每一个，
可能有一个索引，由ID或部门的名称键入
对于每个可能的值，匹配表记录集。最
数据库支持这种索引。

物化视图是作为结果维护的伪表
更新到普通表。我可能会有一个有记录的普通表
对于选举中的每个投票，以及一个具体化的观点
维持每个候选人当前的投票数。物化
视图是一些SQL数据库的功能。

问：地理分布在一个
分布式系统？

答：杀手的问题是复制品之间的通信时间
在不同的地点是长的，由于光的速度。它需要
也许40毫秒从互联网发送消息
东海岸到西海岸。所以如果你运行严格复制
协议像筏与复制品在两个海岸，它将需要
至少80毫秒才能完成任何事情。很多人认为
如果复制品是严格的方案，如筏子是不切实际的
地理分布。

相比之下，在LAN上的高效筏与所有的副本
同样的房间可能会在几十微秒内完成一个操作，
1000倍快。

问：其他大型网站用于存储？

答：很多网站使用传统的SQL数据库，如MySQL。
Facebook使用MySQL，memcached和自定义代码的组合
将数据更新推送到不同的地理位置分离的副本。
Google使用BigTable和Spanner。亚马逊使用发电机。很多网页
网站使用Redis，MongoDB和Cassandra等开源数据库。的
这些，支持地理复制的（因此
攻击与PNUTS相同的问题）是Facebook的设置，扳手，
发电机和卡桑德拉。

问：为什么公司发表有关其专有软件的论文？
保护这个知识产权不是一个秘密吗？

答：出版有趣的高质量研究是一个很好的方法
吸引顶尖的工程师。一个稳定的流的价值
优秀的新员工通常远远高于任何由此造成的损失
出版。