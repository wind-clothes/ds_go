## VMware FT QA
问：不确定性的来源是什么？

A：由于虚拟机管理程序，确保VM的决定性更容易本质上模拟硬件的所有方面，包括所有方面非确定性的潜在来源，如中断时机。

问：GFS和VMware FT(容错)都提供容错功能。相比之下有何差异？

答：FT Replication计算; 你可以用它来透明地添加，任何现有网络服务器的容错能力。FT提供公平严格一致性，对服务器和客户端都是透明的。你可能：例如，使用FT来取代现有的邮件服务器，然后进行配置容错。相比之下，GFS只提供容错功能存储。因为GFS专门针对特定的简单服务（存储），其复制比FT更有效。例如，GFS不需要使完全相同的中断发生所有副本的说明。GFS通常只有较大的一块系统实现完整的容错服务。例如，VMware FT本身依赖于共享的容错存储服务主要和备份（图1中的共享磁盘），您可以使用它们像GFS一样实现（尽管在详细级别的GFS对FT来说不太合适。

**问：3.4节的反弹缓冲如何帮助避免比赛？**

A：当I / O正在进行时，反弹缓冲区是私有的I / O系统。客户操作系统在内存中看不到任何更改DMA正在进行中。当I / O完成时，监视器交换
反弹缓冲区到客户机操作系统的地址空间。因此，它是访客操作系统不可能观察部分完成的DMA。此外，由于监视器记录输入和输出事件，备用监视器将在完全相同的位置交换缓冲区执行为主。

问：什么是“共享存储上的原子测试和设置操作”？

A：这意味着机器可以读取磁盘块并将其写入单原子操作。如果两台机器称这个操作，那么他们的两个读+写周期不会混合，而是一个机器将执行其读+写，后跟读+写其他机器。

问：遵循输出规则会损失多少性能？

答：表2提供了一些见解。按照输出规则，传输速率降低，但不是很大。接收带宽，然而，这是显着减少，但这是因为进来数据包在登录通道上导致大量流量。

问：如果应用程序调用随机数生成器怎么办？不会这样在主要和备份上产生不同的结果，并导致执行分歧

答：主要和备份将从其随机获得相同的数字数字发生器。所有的随机性来源都是由...控制的管理程序; 虚拟机运行完全相同的代码。例如，如果VM
从时钟芯片读取物理时间，管理程序将会看到读取并确保备份上的读取与上一样的值首要的。主备份上的虚拟CPU负载应该是同样的，因为他们执行相同的指令并且闲置相同的虚拟时间。

问：创作者如何确定他们捕获了所有可能的形式的非决定论？

答：我的猜测如下。作者在很多公司工作人们了解虚拟机监视器，微处理器和访客内部操作系统很好，并且会意识到许多陷阱。对于VM-FT具体来说，作者利用a的日志和重播支持以前的一个项目（确定性重播），必须已经有处理非确定论的来源。我假设设计师确定性的重播进行了广泛的测试，并获得了很多经验VM-FT作者的不确定性来源。

问：如果在发送输出后主要失败，会发生什么外部世界？

A：输出可能发生两次：一次在一次，一次备份。这种重复对于网络和磁盘I / O来说不是问题。如果输出是一个网络包，然后是接收客户端的TCP
软件将自动丢弃副本。如果输出事件是磁盘I / O，磁盘I / O是幂等的（都写入相同的数据相同的位置，没有干预的I / O）。

问：第3.4节介绍了有关磁盘I / O的突出表现发生故障时的主要; 它说“相反，我们重新发布备份虚拟机的生效过程中的待处理I / O。“哪里
待处理的I / O位于/存储，以及重新发行的距离需要去？

答：本文正在谈论有日志条目的磁盘I / O表示I / O已启动，但没有表示完成的条目。这些是必须在备份上重新启动的I / O操作。当I / O完成时，I / O设备生成I / O完成打断。因此，如果日志中缺少I / O完成中断，那么备份将重新启动I / O。如果有I / O完成
在日志中中断，则无需重新启动I / O。

问：这个系统有多安全？

答：作者认为主要和备份遵循协议并且不是恶意的（例如，攻击者没有妥协虚拟机管理程序）。系统无法处理受影响的虚拟机管理程序。在上另一方面，虚拟机管理程序可能会自卫恶意或错误的客户操作系统和应用程序。

问：只解决故障停止故障是否合理？什么是其他类型的故障？

答：这是合理的，因为许多现实世界的失败本质上都是这样故障停止，例如许多网络和电源故障。做得更好这比需要处理似乎在运行的计算机但实际计算不正确的结果; 在最坏的情况下，也许这个失败是恶意攻击者的结果。这个比较大非故障停止故障类通常被称为“拜占庭”。有处理拜占庭故障的方法，我们将在最后讨论当然，但是6.824的大部分是关于故障停止故障。
